<body>
    <div class="pagetitle p-5 mt-4">
      <h1>Order products</h1>
      <nav>
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="/admin">Home</a></li>
          <li class="breadcrumb-item active">products</li>
        </ol>
      </nav>
      
    </div>

  <div class="container h-100">
    <div class="row d-flex justify-content-center align-items-center h-100">
      <div class="col-lg-10 col-xl-8">
        <div class="card" style="border-radius: 10px;">
       
          <div class="card-body p-4">
         <!--   <div class="d-flex justify-content-between align-items-center mb-4">
              <p class="lead fw-normal mb-0" style="color: #a8729a;">Receipt</p>
              <p class="small text-muted mb-0">Receipt Voucher : 1KAU9-84UIL</p>
            </div> ---->
            {{#each ord}}
            <div class="card shadow-0 border mb-4">
              <div class="card-body">
                <div class="row">
                  <div class="col-md-2">
                    <img src="/productimage/{{this.products.img.[0]}}"
                      class="img-fluid" alt="Phone">
                  </div>
                  <div class="col-md-2 text-center d-flex justify-content-center align-items-center">
                    <p class="text-dark mb-0">{{this.products.name}}</p>
                  </div>
                    <div class="col-md-2 text-center d-flex justify-content-center align-items-center">
                    <p class="text-dark mb-0">{{this.products.ofprice}}</p>
                  </div>
                
                
                  <div class="col-md-2 text-center d-flex justify-content-center align-items-center">
                    <p class="text-muted mb-0 small"></p>
                  </div>
                  <div class="col-md-2 text-center d-flex justify-content-center align-items-center">
                    <p class="text-dark mb-0 small">Qty: {{this.qnt}}</p>
                  </div>
                  <div class="col-md-2 text-center d-flex justify-content-center align-items-center">
                    <p class="text-dark mb-0 small">RS {{this.total}}</p>
                  </div>
                </div>
                <hr class="mb-4" style="background-color: #e0e0e0; opacity: 1;">
                   <div class="row d-flex align-items-center">
                  <div class="col-md-2">
                    <p class="text-muted mb-0 small">status</p>
                  </div>
                  <div class="col-md-10">
                  
                   
                      {{#if this.status}}
                          <div class="d-flex justify-content-around mb-1">
                          <p class="text-muted mt-1 mb-0 small ms-xl-5">{{this.status}}</p>
                          {{#if this.del}}
                              {{#if this.ret}}
                              <span>user Requested return</span>
                              {{else}}
                          <span>product deleverd</span>
                          {{/if}}
                          {{else}}
                            <button type="button"  class="btn btn-primary btn-lg btn-block"data-toggle="modal"  data-target="#exampleModal{{this.products._id}}">Change Status</button>
                            <div class="modal fade" id="exampleModal{{this.products._id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                          
                          
    
      <div class="modal-dialog" role="form">
        <div class="modal-content">
          <div class="modal-header text-center">
            <h4 class="modal-title w-100 font-weight-bold">Status<i class="fa-solid fa-percent p-2"></i></h4>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
            
          <div class="modal-body mx-3">
            <div class="md-form ">
              {{#if this.shiped}}
              <input type="radio" checked id="d{{this.products._id}}" value="del">
               <label>Delevered</label>
                <div class="modal-footer d-flex justify-content-center">
             <button class="btn-btn-primary" type="button" onclick=" sub('{{this.products._id}}','{{this._id}}')"  >Apply</button>
            </div>
              {{else if this.payed}}
               <input type="radio" checked id="d{{this.products._id}}" value="shiped" >
               <label>Shiped</label>
            </div>
             <div class="modal-footer d-flex justify-content-center">
             <button class="btn-btn-primary" type="button" onclick=" sub('{{this.products._id}}','{{this._id}}')"  >Apply</button>
            </div>
          
         
             
            </div>
          </div>
          
          </div>
         
         
         
          {{else}}
          <span>Order is not place.....!</span>
          {{/if}}
          
          
        </div>
      </div>
    </div>
    {{/if}}
                        
                    </div>
                     {{else}}
                     {{#if this.ret}}
                     <p class="text-muted mt-1 mb-0 small ms-xl-5">Product returned</p>
                     {{else}}
                     <div class="d-flex justify-content-around mb-1">
                      <p class="text-muted mt-1 mb-0 small ms-xl-5">order is canceled</p>
                    </div>
                    {{/if}}
                      {{/if}}
                  </div>
                </div>  
            
            
              </div>
            </div>
          
               
                <hr class="mb-4" style="background-color: #e0e0e0; opacity: 1;">
                  {{/each}}
             
   
         
          <div class="card-footer border-0 px-4 py-5  justify-content-center " >
         
           
          </div>
        </div>
      </div>
    </div>
  </div>
  <script>
    function sub(e,ord){
      console.log(';hijhio')
      let stat = document.getElementById('d'+e).value
      let value = e
      
         $.ajax({
          url:'/admin/status',
         data:{
            id:value,
            status:stat,
            ordid:ord
         },
         method:'post',
         success:(response)=>{
           window.location.reload();
         }
      })
    }
   
     </script>
                      
                      
                      
                      
                      
                      
 

<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.12.1/css/jquery.dataTables.css">
  
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.js"></script>

    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>

    <!-- Contact Javascript File -->
    <script src="mail/jqBootstrapValidation.min.js"></script>
    <script src="mail/contact.js"></script>

    <!-- Template Javascript -->
    <script src="js/main.js"></script>
 
  
          
  </body>
  <script>
    </script>   
        <!-- Optional JavaScript; choose one of the two! -->


  <!-- Template Main JS File -->
  <script src="/stylesheets/assets/js/main.js"></script>
    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
   
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
 




